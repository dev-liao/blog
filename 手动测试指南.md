# 手动测试指南 - Next.js 博客项目

## 📊 项目概览

这是一个基于 Next.js 15 的现代化博客系统，集成了 Supabase 后端数据库。

### 技术栈
- **前端框架**: Next.js 15.5.3 + React 19.1.0
- **语言**: TypeScript
- **样式**: Tailwind CSS 4 + shadcn/ui
- **数据库**: Supabase (PostgreSQL)
- **认证**: Supabase Auth
- **构建工具**: Turbopack

### 核心功能
- ✅ 用户注册/登录/登出
- ✅ 文章创建/编辑/删除
- ✅ 文章搜索和标签筛选
- ✅ 文章收藏功能
- ✅ 评论系统
- ✅ 深色模式切换
- ✅ RSS 订阅
- ✅ 管理员后台

---

## 🔧 测试前准备

### 第一步：检查环境

1. **Node.js 版本检查**
   ```bash
   node --version
   ```
   需要 Node.js 18 或更高版本

2. **安装依赖**
   ```bash
   cd nextjs-blog
   npm install
   ```

### 第二步：配置 Supabase

#### 方案 A: 已有 Supabase 项目

如果你已经配置了 Supabase，确保 `.env.local` 文件存在：

```bash
# 检查环境变量文件
dir .env.local
```

`.env.local` 应包含：
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
```

#### 方案 B: 新建 Supabase 项目

1. 访问 [https://supabase.com](https://supabase.com)
2. 创建新项目
3. 获取项目 URL 和 API Keys
4. 在项目根目录创建 `.env.local` 文件
5. 复制环境变量模板并填写实际值

详细步骤请参考：`SUPABASE_SETUP.md`

#### 方案 C: 本地测试（无 Supabase）

**注意**：如果没有配置 Supabase，部分功能将无法使用：
- ❌ 用户注册/登录
- ❌ 数据持久化
- ✅ 界面浏览（使用模拟数据）

### 第三步：启动开发服务器

```bash
npm run dev
```

等待服务器启动，看到以下信息表示成功：
```
✓ Ready in Xms
○ Local:   http://localhost:3000
```

---

## 🧪 功能测试清单

### 1. 基础界面测试

#### 1.1 首页
- [ ] 打开 http://localhost:3000
- [ ] 检查页面是否正常加载
- [ ] 检查导航栏显示（Logo、首页、文章、关于）
- [ ] 检查英雄区域（欢迎标题和描述）
- [ ] 检查精选文章卡片显示
- [ ] 检查技术栈展示区域
- [ ] 检查页脚信息

#### 1.2 深色模式
- [ ] 点击导航栏右侧的主题切换按钮（月亮/太阳图标）
- [ ] 验证页面切换到深色模式
- [ ] 检查所有元素颜色是否正确显示
- [ ] 再次点击，验证切换回浅色模式
- [ ] 刷新页面，检查主题设置是否保持

#### 1.3 响应式设计
- [ ] 调整浏览器窗口大小
- [ ] 检查移动端视图（宽度 < 768px）
- [ ] 检查平板视图（768px - 1024px）
- [ ] 检查桌面视图（> 1024px）
- [ ] 验证导航栏在不同尺寸下的显示

### 2. 文章功能测试

#### 2.1 文章列表页
- [ ] 访问 http://localhost:3000/articles
- [ ] 检查文章列表是否显示
- [ ] 检查每篇文章的信息：
  - 标题
  - 描述
  - 作者
  - 日期
  - 标签
  - 阅读时间
- [ ] 检查收藏按钮显示

#### 2.2 搜索功能
- [ ] 在导航栏搜索框输入关键词（如"Next.js"）
- [ ] 按回车或点击搜索
- [ ] 验证跳转到文章页面并显示搜索结果
- [ ] 尝试搜索不存在的内容
- [ ] 验证显示"没有找到相关文章"

#### 2.3 标签筛选
- [ ] 在文章列表页点击标签筛选下拉框
- [ ] 选择一个标签（如"Next.js"）
- [ ] 验证文章列表只显示该标签的文章
- [ ] 选择"所有标签"
- [ ] 验证显示所有文章

#### 2.4 文章详情页
- [ ] 点击任意文章标题
- [ ] 验证跳转到文章详情页
- [ ] 检查文章内容：
  - 标题
  - 作者信息
  - 发布日期
  - 标签列表
  - 文章正文
  - 代码高亮显示
- [ ] 检查"返回文章列表"按钮
- [ ] 检查收藏按钮

### 3. 用户认证测试（需要 Supabase）

⚠️ **前提条件**：已配置 Supabase 并创建数据库表

#### 3.1 用户注册
- [ ] 点击导航栏的"登录"按钮
- [ ] 点击"注册"标签
- [ ] 填写注册表单：
  - 姓名：测试用户
  - 邮箱：test@example.com
  - 密码：password123
  - 确认密码：password123
- [ ] 点击"注册"按钮
- [ ] 验证注册成功并自动登录
- [ ] 检查导航栏显示用户菜单（头像）

#### 3.2 用户登录
- [ ] 如已登录，先点击用户菜单 > 登出
- [ ] 点击"登录"按钮
- [ ] 填写登录表单：
  - 邮箱：test@example.com
  - 密码：password123
- [ ] 点击"登录"按钮
- [ ] 验证登录成功
- [ ] 检查用户菜单显示

#### 3.3 用户菜单
- [ ] 登录后，点击导航栏的用户头像
- [ ] 检查下拉菜单显示：
  - 我的文章
  - 我的收藏
  - 个人资料
  - 登出
- [ ] 点击"个人资料"
- [ ] 验证跳转到个人资料页面

#### 3.4 用户登出
- [ ] 点击用户菜单 > 登出
- [ ] 验证登出成功
- [ ] 检查导航栏恢复到"登录"按钮
- [ ] 刷新页面，确认未自动登录

### 4. 文章管理测试（需要登录）

#### 4.1 创建文章
- [ ] 登录账户
- [ ] 点击用户菜单 > 我的文章
- [ ] 点击"创建新文章"按钮
- [ ] 填写文章表单：
  - 标题：测试文章标题
  - 描述：这是一篇测试文章
  - 内容：编写一些测试内容
  - 标签：选择或输入标签
- [ ] 点击"发布文章"按钮
- [ ] 验证文章创建成功
- [ ] 检查是否跳转到文章详情页
- [ ] 验证文章在"我的文章"列表中显示

#### 4.2 编辑文章
- [ ] 在"我的文章"页面找到刚创建的文章
- [ ] 点击"编辑"按钮
- [ ] 修改文章标题或内容
- [ ] 点击"保存修改"
- [ ] 验证修改成功
- [ ] 检查文章详情页显示更新后的内容

#### 4.3 删除文章
- [ ] 在"我的文章"页面找到测试文章
- [ ] 点击"删除"按钮
- [ ] 确认删除操作
- [ ] 验证文章从列表中消失
- [ ] 尝试访问该文章的详情页
- [ ] 验证显示 404 或文章不存在

### 5. 收藏功能测试（需要登录）

#### 5.1 收藏文章
- [ ] 登录账户
- [ ] 访问文章列表或详情页
- [ ] 点击文章的收藏按钮（心形图标）
- [ ] 验证按钮状态变化（填充的心形）
- [ ] 验证显示提示"已收藏"

#### 5.2 查看收藏
- [ ] 点击用户菜单 > 我的收藏
- [ ] 验证收藏的文章显示在列表中
- [ ] 检查文章信息完整

#### 5.3 取消收藏
- [ ] 在收藏列表中点击收藏按钮
- [ ] 验证文章从收藏列表中移除
- [ ] 或在文章详情页取消收藏
- [ ] 验证按钮恢复到未收藏状态

### 6. 评论功能测试（需要登录）

#### 6.1 发表评论
- [ ] 登录账户
- [ ] 访问任意文章详情页
- [ ] 滚动到评论区
- [ ] 在评论框中输入评论内容
- [ ] 点击"发表评论"按钮
- [ ] 验证评论显示在列表中
- [ ] 检查评论信息：
  - 评论内容
  - 评论者姓名
  - 评论时间

#### 6.2 查看评论
- [ ] 访问有评论的文章
- [ ] 检查评论列表显示
- [ ] 验证评论按时间排序
- [ ] 检查评论计数是否正确

#### 6.3 未登录状态
- [ ] 登出账户
- [ ] 访问文章详情页
- [ ] 验证评论区显示"请登录后发表评论"
- [ ] 点击登录提示
- [ ] 验证打开登录模态框

### 7. 其他页面测试

#### 7.1 关于页面
- [ ] 访问 http://localhost:3000/about
- [ ] 检查页面内容显示
- [ ] 验证页面样式正确
- [ ] 检查返回首页的链接

#### 7.2 我的文章页面
- [ ] 登录后访问用户菜单 > 我的文章
- [ ] 检查文章列表显示
- [ ] 验证每篇文章的操作按钮：
  - 查看
  - 编辑
  - 删除
- [ ] 检查"创建新文章"按钮

#### 7.3 个人资料页面
- [ ] 访问个人资料页面
- [ ] 检查用户信息显示：
  - 头像
  - 姓名
  - 邮箱
- [ ] 检查统计信息：
  - 文章数量
  - 收藏数量
  - 评论数量

#### 7.4 404 页面
- [ ] 访问不存在的路径 http://localhost:3000/not-found
- [ ] 验证显示 404 页面
- [ ] 检查"返回首页"链接
- [ ] 点击链接，验证跳转到首页

### 8. RSS 订阅测试

- [ ] 访问 http://localhost:3000/feed.xml
- [ ] 验证返回 XML 格式的 RSS 文件
- [ ] 检查 RSS 内容包含：
  - 博客标题和描述
  - 文章列表
  - 文章链接
- [ ] 尝试在 RSS 阅读器中订阅

---

## 🐛 常见问题排查

### 问题 1: 页面无法加载

**症状**：访问 http://localhost:3000 显示无法访问

**解决方案**：
1. 检查开发服务器是否启动
   ```bash
   npm run dev
   ```
2. 检查端口 3000 是否被占用
   ```bash
   netstat -ano | findstr :3000
   ```
3. 尝试更换端口
   ```bash
   npm run dev -- -p 3001
   ```

### 问题 2: Supabase 连接失败

**症状**：登录、注册等功能报错，控制台显示 Supabase 错误

**解决方案**：
1. 检查 `.env.local` 文件是否存在
2. 验证环境变量是否正确配置
3. 检查 Supabase 项目是否正常运行
4. 查看浏览器控制台的详细错误信息
5. 重启开发服务器

### 问题 3: 数据库表不存在

**症状**：控制台显示 "relation does not exist" 错误

**解决方案**：
1. 登录 Supabase 控制台
2. 打开 SQL 编辑器
3. 执行数据库迁移脚本（见 `SUPABASE_SETUP.md`）
4. 验证所有表已创建：
   - users
   - articles
   - comments
   - favorites

### 问题 4: 构建失败

**症状**：运行 `npm run build` 失败

**解决方案**：
1. 运行检查脚本
   ```bash
   .\check-build.bat
   ```
2. 查看错误信息
3. 修复 TypeScript 类型错误
4. 修复 ESLint 警告
5. 清除缓存重新构建
   ```bash
   rm -rf .next
   npm run build
   ```

### 问题 5: 样式显示异常

**症状**：页面布局混乱，样式不正确

**解决方案**：
1. 检查 Tailwind CSS 是否正确配置
2. 清除浏览器缓存
3. 重启开发服务器
4. 检查暗色模式设置

### 问题 6: 认证状态不同步

**症状**：登录后刷新页面变为未登录状态

**解决方案**：
1. 检查 Supabase session 是否正常
2. 清除浏览器 localStorage
3. 重新登录
4. 检查 AuthContext 实现

---

## 📊 测试报告模板

### 测试环境
- 操作系统: Windows 10
- 浏览器: Chrome / Firefox / Edge
- Node.js 版本: 
- Supabase: 是 / 否

### 测试结果

| 功能模块 | 测试项 | 状态 | 备注 |
|---------|--------|------|------|
| 基础界面 | 首页加载 | ✅ / ❌ | |
| 基础界面 | 深色模式 | ✅ / ❌ | |
| 基础界面 | 响应式设计 | ✅ / ❌ | |
| 文章功能 | 文章列表 | ✅ / ❌ | |
| 文章功能 | 搜索功能 | ✅ / ❌ | |
| 文章功能 | 标签筛选 | ✅ / ❌ | |
| 文章功能 | 文章详情 | ✅ / ❌ | |
| 用户认证 | 用户注册 | ✅ / ❌ | |
| 用户认证 | 用户登录 | ✅ / ❌ | |
| 用户认证 | 用户登出 | ✅ / ❌ | |
| 文章管理 | 创建文章 | ✅ / ❌ | |
| 文章管理 | 编辑文章 | ✅ / ❌ | |
| 文章管理 | 删除文章 | ✅ / ❌ | |
| 收藏功能 | 收藏文章 | ✅ / ❌ | |
| 收藏功能 | 查看收藏 | ✅ / ❌ | |
| 收藏功能 | 取消收藏 | ✅ / ❌ | |
| 评论功能 | 发表评论 | ✅ / ❌ | |
| 评论功能 | 查看评论 | ✅ / ❌ | |
| 其他功能 | RSS 订阅 | ✅ / ❌ | |

### 发现的问题

1. **问题描述**：
   - 严重程度：高 / 中 / 低
   - 复现步骤：
   - 预期结果：
   - 实际结果：

### 测试总结

- 测试完成时间：
- 测试通过率：
- 是否可以发布：是 / 否
- 建议改进：

---

## 🚀 下一步

### 如果所有测试通过

1. **构建生产版本**
   ```bash
   npm run build
   ```

2. **本地预览生产版本**
   ```bash
   npm start
   ```

3. **部署到生产环境**
   - 参考 `DEPLOYMENT.md` 文件
   - 配置生产环境的环境变量
   - 执行部署脚本

### 如果测试发现问题

1. 记录问题详情
2. 确定问题优先级
3. 修复问题
4. 重新测试
5. 更新文档

---

## 📞 获取帮助

如果在测试过程中遇到问题：

1. 查看项目文档：
   - `README.md` - 项目概述
   - `DEVELOPMENT.md` - 开发指南
   - `SUPABASE_SETUP.md` - Supabase 配置
   - `DEPLOYMENT.md` - 部署指南

2. 查看日志：
   - 浏览器控制台（F12）
   - 终端输出
   - Supabase 日志

3. 检查常见问题部分

4. 查看 GitHub Issues（如果适用）

---

**祝测试顺利！** 🎉


